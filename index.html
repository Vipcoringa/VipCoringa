<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>VipCoringa | Monitor de Views com Previs√£o</title>
    <!-- Inclui Tailwind CSS para estiliza√ß√£o r√°pida e responsiva -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Carrega a fonte 'Fira Code' do Google Fonts, ideal para exibi√ß√£o tipo terminal -->
    <link href="https://fonts.googleapis.com/css2?family=Fira+Code:wght@400;500&display=swap" rel="stylesheet">
    <style>
        /* Define a fonte padr√£o para o corpo e a cor de fundo */
        body {
            font-family: 'Fira Code', monospace; /* Fira Code √© uma fonte monoespa√ßada, ideal para terminal */
            background-color: #0a0a0a; /* Fundo preto escuro */
        }
        /* Estilos para a caixa do terminal, adicionando uma sombra azul sutil */
        .terminal {
            box-shadow: 0 0 20px rgba(59, 130, 246, 0.3);
        }
        /* Estilos para o cabe√ßalho do terminal */
        .terminal-header {
            height: 30px; /* Altura fixa do cabe√ßalho */
            border-top-left-radius: 0.5rem; /* Cantos arredondados */
            border-top-right-radius: 0.5rem; /* Cantos arredondados */
        }
        /* Estilos para os pontos de controle (vermelho, amarelo, verde) no cabe√ßalho, simulando bot√µes de janela */
        .terminal-dot {
            width: 12px;
            height: 12px;
            border-radius: 50%; /* C√≠rculos perfeitos */
            margin-right: 6px;
        }
        /* Estilos para a √°rea de conte√∫do do terminal, com uma sombra interna para profundidade */
        .terminal-content {
            box-shadow: inset 0 0 10px rgba(0, 0, 0, 0.5);
        }
        /* Anima√ß√£o de piscar para o cursor no carregamento */
        .blink {
            animation: blink 1s infinite;
        }
        @keyframes blink {
            0% { opacity: 1; }
            50% { opacity: 0; }
            100% { opacity: 1; }
        }
    </style>
</head>
<body class="min-h-screen flex flex-col items-center justify-center p-4 bg-gray-900 text-gray-100">
    <!-- T√≠tulo principal da p√°gina, centralizado e com cores destacadas -->
    <div class="w-full max-w-4xl mx-auto mb-6">
        <h1 class="text-2xl md:text-3xl font-bold text-center text-blue-400 font-mono">
            VipCoringa <span class="text-gray-400">|</span> <span class="text-gray-300">Monitor de Views com Previs√£o</span>
        </h1>
    </div>

    <!-- Se√ß√£o de Input para a Previs√£o de Visualiza√ß√µes -->
    <div class="w-full max-w-4xl mx-auto mb-6 p-4 bg-gray-800 rounded-lg border border-gray-700 shadow-md">
        <h2 class="text-xl font-bold text-blue-300 mb-4 text-center">Previs√£o de Visualiza√ß√µes</h2>
        <div class="flex flex-col sm:flex-row items-center justify-center gap-4">
            <input
                type="number"
                id="targetViewsInput"
                placeholder="Views alvo (ex: 1000000)"
                class="w-full sm:w-auto flex-grow px-4 py-2 rounded-md bg-gray-700 text-gray-100 border border-gray-600 focus:outline-none focus:ring-2 focus:ring-blue-500"
                min="0"
            />
            <button
                id="startAnalysisButton"
                class="w-full sm:w-auto px-6 py-2 rounded-md bg-blue-600 hover:bg-blue-700 transition duration-300 text-white font-bold focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 focus:ring-offset-gray-900"
            >
                Iniciar An√°lise
            </button>
        </div>
    </div>

    <!-- Cont√™iner principal do terminal, simulando uma janela de console -->
    <div class="terminal w-full max-w-4xl rounded-lg overflow-hidden border border-gray-700">
        <!-- Cabe√ßalho do terminal com os bot√µes de controle e o endere√ßo da fonte de dados -->
        <div class="terminal-header bg-gray-800 flex items-center px-4">
            <div class="terminal-dot bg-red-500"></div>
            <div class="terminal-dot bg-yellow-500"></div>
            <div class="terminal-dot bg-green-500"></div>
            <!-- Exibe a URL da API, informando que um proxy CORS est√° sendo usado -->
            <span class="text-xs ml-4 text-gray-400 hidden sm:inline">https://komarev.com/ghpvc/ (Via CORS Proxy)</span>
        </div>
        
        <!-- √Årea de conte√∫do onde o painel formatado ser√° exibido -->
        <div class="terminal-content bg-black p-4 md:p-6 overflow-auto max-h-[70vh]">
            <pre class="text-sm md:text-base text-green-100 font-mono whitespace-pre-wrap" id="api-content">
Carregando dados do monitor... <span class="blink">|</span>
            </pre>
        </div>
        
        <!-- Rodap√© do terminal com informa√ß√µes de status e √∫ltima atualiza√ß√£o -->
        <div class="bg-gray-900 text-xs text-gray-500 p-2 flex justify-between items-center">
            <div>
                <span class="hidden sm:inline">Terminal</span> 
                <span class="inline sm:hidden">VipCoringa</span>
            </div>
            <div>
                <span id="last-update">√öltima atualiza√ß√£o: --:--:--</span>
            </div>
        </div>
    </div>

    <script>
        // ============================================================================================================
        // ATEN√á√ÉO: USO DE PROXY P√öBLICO CORS
        // Esta √© a solu√ß√£o para fazer a requisi√ß√£o funcionar no GitHub Pages,
        // contornando o erro de CORS (Cross-Origin Resource Sharing) que a API komarev.com n√£o permite.
        // NO ENTANTO, proxies p√∫blicos N√ÉO S√ÉO RECOMENDADOS PARA USO EM PRODU√á√ÉO devido a:
        // - Confiabilidade: Podem sair do ar a qualquer momento.
        // - Limites de Uso: Podem bloquear suas requisi√ß√µes se houver muitas.
        // - Seguran√ßa: Seus dados passam por um servidor de terceiros.
        // A MELHOR SOLU√á√ÉO AINDA √â TER UM BACKEND PR√ìPRIO (como na Vercel Functions) ou que a API de destino permita CORS.
        // ============================================================================================================

        // URL da API komarev.com que retorna as views em formato SVG.
        const originalKomarevApiUrl = 'https://komarev.com/ghpvc/?username=VipCoringa&style=for-the-badge&label=Views:&color=gray';
        
        // URL do proxy CORS p√∫blico, concatenado com a URL da API real.
        const komarevApiUrl = `https://corsproxy.io/?${encodeURIComponent(originalKomarevApiUrl)}`;
        
        const USERNAME = 'VipCoringa'; // Seu nome de usu√°rio para o monitor
        const ARROW = '‚áß'; // Caractere de seta para indicar status de subida

        // Refer√™ncias aos elementos do DOM
        const contentElement = document.getElementById('api-content');
        const lastUpdateElement = document.getElementById('last-update');
        const targetViewsInput = document.getElementById('targetViewsInput');
        const startAnalysisButton = document.getElementById('startAnalysisButton');

        // Vari√°veis de estado do monitor e previs√£o
        let currentViews = 0; // Armazena o n√∫mero de views atual
        let targetViews = 0; // Armazena a meta de views do usu√°rio
        let initialViews = 0; // Views no in√≠cio da an√°lise de 1 minuto
        let analysisStartTime = null; // Timestamp do in√≠cio da an√°lise
        let viewRatePerSecond = 0; // Taxa de views por segundo (views/segundo)
        let isAnalyzing = false; // Flag para indicar se a an√°lise est√° em andamento
        let analysisTimeoutId = null; // ID do timeout para a an√°lise de 1 minuto

        /**
         * Obt√©m a hora atual formatada, garantindo o fuso hor√°rio correto (S√£o Paulo).
         * @returns {string} A hora atual no formato HH:MM:SS.
         */
        function getHora() {
            return new Date().toLocaleTimeString('pt-BR', { hour12: false, timeZone: 'America/Sao_Paulo' });
        }

        /**
         * Obt√©m a data e hora formatadas.
         * @param {Date} date - Objeto Date a ser formatado.
         * @returns {string} A data e hora no formato DD/MM/YYYY HH:MM:SS.
         */
        function formatDateTime(date) {
            return date.toLocaleDateString('pt-BR', { timeZone: 'America/Sao_Paulo' }) + ' ' +
                   date.toLocaleTimeString('pt-BR', { hour12: false, timeZone: 'America/Sao_Paulo' });
        }

        /**
         * Constr√≥i o painel de texto formatado para exibi√ß√£o no terminal.
         * Reintroduz os caracteres estilizados como solicitado.
         * @param {string} views - O n√∫mero de views formatado como string.
         * @param {string} status - O status atual do monitor.
         * @param {string} hora - A hora atual formatada.
         * @param {number} currentViewsNum - O n√∫mero de views atual em formato num√©rico.
         * @returns {string} O painel de texto formatado.
         */
        function buildPanel(views, status, hora, currentViewsNum) {
            let predictionInfo = '';
            // Se uma an√°lise estiver em andamento, mostra o tempo restante para o fim da an√°lise
            if (isAnalyzing) {
                const elapsed = (Date.now() - analysisStartTime) / 1000; // Tempo decorrido em segundos
                const remaining = Math.max(0, 60 - Math.floor(elapsed)); // Tempo restante (m√≠nimo 0)
                predictionInfo = `
‚ï†‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ï£
‚ïë ùô∞ùôΩùô∞ÃÅùôªùô∏ùöÇùô¥: ${remaining.toString().padStart(2, '0')} ùöúùöéùöêùöûùöóùöçùöòùöú ùöõùöéùöúùöùùöäùöóùöùùöéùöú ‚ïë
`.trim();
            } else if (targetViews > 0 && viewRatePerSecond > 0 && currentViewsNum < targetViews) {
                // Se a an√°lise terminou e h√° uma taxa de views v√°lida, mostra a previs√£o
                const remainingViews = targetViews - currentViewsNum; // Views que faltam para a meta
                const timeNeededInSeconds = remainingViews / viewRatePerSecond; // Tempo necess√°rio em segundos
                
                const completionDate = new Date(Date.now() + timeNeededInSeconds * 1000); // Data e hora da conclus√£o
                const formattedCompletion = formatDateTime(completionDate); // Formata para exibi√ß√£o

                predictionInfo = `
‚ï†‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ï£
‚ïë ùöÖùô∏ùô¥ùöÜùöÇ ùô∞ùôªùöÖùôæ : ${targetViews.toLocaleString('pt-BR').padEnd(15)}‚ïë
‚ïë ùôøùöÅùô¥ùöÖùô∏ùöÇùô∞ÃÉùôæ  : ${formattedCompletion.padEnd(15)}‚ïë
`.trim();
            } else if (targetViews > 0 && viewRatePerSecond === 0 && !isAnalyzing) {
                // Se a an√°lise terminou, mas a taxa √© zero (nenhuma view detectada)
                predictionInfo = `
‚ï†‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ï£
‚ïë ùöÖùô∏ùô¥ùöÜùöÇ ùô∞ùôªùöÖùôæ : ${targetViews.toLocaleString('pt-BR').padEnd(15)}‚ïë
‚ïë ùöÇùöÉùô∞ùöÉùöÑùöÇ    : ùöÇùöéùöñ ùöüùöíùöéùö†ùöú ùöóùöä ùöäùöóùöäÃÅùöïùöíùöúùöé ‚ïë
`.trim();
            } else if (targetViews > 0 && currentViewsNum >= targetViews && !isAnalyzing) {
                // Se a meta j√° foi atingida
                 predictionInfo = `
‚ï†‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ï£
‚ïë ùöÖùô∏ùô¥ùöÜùöÇ ùô∞ùôªùöÖùôæ : ${targetViews.toLocaleString('pt-BR').padEnd(15)}‚ïë
‚ïë ùöÇùöÉùô∞ùöÉùöÑùöÇ    : ùôºùô¥ùöÉùô∞ ùô∞ùöÉùô∏ùôΩùô∂ùô∏ùô≥ùô∞! üéâ ‚ïë
`.trim();
            }

            // Constr√≥i o painel principal com os dados e informa√ß√µes de previs√£o
            return `
‚ïî‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïó
‚ïë       ùôºùôæùôΩùô∏ùöÉùôæùöÅ ùô≥ùô¥ ùöÖùô∏ùô¥ùöÜùöÇ       ‚ïë
‚ï†‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ï£
‚ïë ùöÑùöúùöûùöäÃÅùöõùöíùöò: ${USERNAME.padEnd(20)}‚ïë
‚ï†‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ï£
‚ïë ùöÖùô∏ùô¥ùöÜùöÇ ùô∞ùöÉùöÑùô∞ùô∏ùöÇ : ${views.padEnd(15)}‚ïë
‚ïë ùöÇùöÉùô∞ùöÉùöÑùöÇ       : ${status.padEnd(15)}‚ïë
‚ïë ùô∑ùôæùöÅùô∞ÃÅùöÅùô∏ùôæ      : ${hora.padEnd(15)}‚ïë
${predictionInfo ? predictionInfo : ''}
‚ïö‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïù
`.trim();
        }

        /**
         * Inicia o processo de an√°lise de 1 minuto para calcular a taxa de views.
         */
        function startAnalysis() {
            // Remove pontos de milhares do input e converte para n√∫mero inteiro
            const inputVal = parseInt(targetViewsInput.value.replace(/\./g, '')); 
            
            if (isNaN(inputVal) || inputVal <= 0) {
                contentElement.textContent = `[${getHora()}] Por favor, insira um n√∫mero de views alvo v√°lido e positivo.`;
                return;
            }

            targetViews = inputVal; // Define a meta de views
            isAnalyzing = true; // Inicia o modo de an√°lise
            initialViews = currentViews; // Captura as views atuais como ponto de partida
            analysisStartTime = Date.now(); // Marca o in√≠cio da an√°lise
            viewRatePerSecond = 0; // Reseta a taxa de views antes de iniciar a nova an√°lise

            // Desabilita o input e o bot√£o durante a an√°lise para evitar altera√ß√µes
            startAnalysisButton.disabled = true;
            targetViewsInput.disabled = true;

            contentElement.textContent = `[${getHora()}] Iniciando an√°lise de taxa de views para ${targetViews.toLocaleString('pt-BR')} views... Aguarde 1 minuto.`;
            
            // Define um timeout para encerrar a an√°lise ap√≥s 1 minuto (60 segundos)
            analysisTimeoutId = setTimeout(endAnalysis, 60000);
        }

        /**
         * Encerra o processo de an√°lise de 1 minuto e calcula a taxa de views.
         */
        function endAnalysis() {
            isAnalyzing = false; // Sai do modo de an√°lise
            const finalViews = currentViews; // Captura as views ao final do minuto

            const viewsGained = finalViews - initialViews; // Views ganhas durante o minuto
            viewRatePerSecond = viewsGained / 60; // Views por segundo

            // Reabilita o input e o bot√£o
            startAnalysisButton.disabled = false;
            targetViewsInput.disabled = false;

            let statusMessage = '';
            if (viewRatePerSecond > 0) {
                statusMessage = `Taxa calculada: ${viewRatePerSecond.toFixed(2)} views/segundo.`;
            } else {
                statusMessage = `Nenhuma view detectada durante a an√°lise. Tente novamente!`;
            }
            console.log(`An√°lise conclu√≠da: ${statusMessage}`);
            // A pr√≥xima chamada de `fetchData` ir√° atualizar o painel com a nova taxa.
        }

        /**
         * Busca o n√∫mero de views diretamente da API komarev.com (via proxy) e atualiza o painel.
         */
        async function fetchData() {
            try {
                // Faz a requisi√ß√£o para o proxy CORS, que ent√£o encaminha para a API komarev.com
                const response = await fetch(komarevApiUrl, { cache: 'no-store' });
                
                // Se a resposta do proxy n√£o for OK, algo deu errado (o proxy pode ter falhado ou a API).
                if (!response.ok) {
                    throw new Error(`Erro na requisi√ß√£o (possivelmente proxy ou Komarev): ${response.status} ${response.statusText}`);
                }
                
                // A resposta √© um SVG, precisamos extrair o n√∫mero de views dele.
                const svgText = await response.text();
                // A express√£o regular procura por 'aria-label="(?:[^"]*:: )?([0-9,]+)"' e captura o n√∫mero.
                const match = svgText.match(/aria-label="(?:[^"]*:: )?([0-9,]+)/);
                
                let viewsString = 'N/A';
                if (match && match[1]) {
                    viewsString = match[1]; // O n√∫mero de views encontrado (ex: "1,234,567")
                    currentViews = parseInt(viewsString.replace(/,/g, '')); // Converte para n√∫mero inteiro, removendo v√≠rgulas
                } else {
                    console.warn('N√£o foi poss√≠vel extrair o n√∫mero de views do SVG.');
                    currentViews = 0;
                }

                const hora = getHora();
                let status = `${ARROW} ùöÇùöÑùô±ùô∏ùôΩùô≥ùôæ`; // Status padr√£o
                
                // Ajusta o status dependendo do estado da an√°lise ou da meta
                if (isAnalyzing) {
                    status = `ùô∞ùôΩùô∞ùôªùô∏ùöÇùô∞ùôΩùô≥ùôæ...`;
                } else if (targetViews > 0 && currentViews >= targetViews) {
                    status = `ùôºùô¥ùöÉùô∞ ùô∞ùöÉùô∏ùôΩùô∂ùô∏ùô≥ùô∞!`;
                }


                // Constr√≥i o painel com os dados obtidos e informa√ß√µes de previs√£o
                const painel = buildPanel(viewsString, status, hora, currentViews);
                contentElement.textContent = painel; // Atualiza o conte√∫do do terminal
                
                updateDateTime(); // Atualiza o carimbo de data/hora da √∫ltima atualiza√ß√£o
            } catch (error) {
                const errorTime = new Date().toLocaleTimeString('pt-BR', { timeZone: 'America/Sao_Paulo' });
                contentElement.textContent = `[${errorTime}] Erro ao carregar dados: ${error.message}\nVerifique o console para mais detalhes ou tente outro proxy CORS.`;
                console.error('Erro ao buscar dados:', error);
            }
        }

        /**
         * Atualiza a exibi√ß√£o da data e hora da √∫ltima atualiza√ß√£o no rodap√©.
         */
        function updateDateTime() {
            const now = new Date();
            const timeString = now.toLocaleTimeString('pt-BR', { timeZone: 'America/Sao_Paulo' });
            lastUpdateElement.textContent = `√öltima atualiza√ß√£o: ${timeString}`;
        }

        // Adiciona o event listener para o bot√£o de iniciar an√°lise
        startAnalysisButton.addEventListener('click', startAnalysis);

        // Carrega os dados imediatamente ao iniciar e depois a cada 1 segundo
        fetchData();
        setInterval(fetchData, 1000);

        // Atualiza o hor√°rio da √∫ltima atualiza√ß√£o no rodap√© a cada segundo para manter preciso
        updateDateTime();
        setInterval(updateDateTime, 1000);
    </script>
</body>
</html>

