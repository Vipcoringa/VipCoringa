--[[ 
APEXWARE 1.5 — SURVIVE THE KILLER (PT-BR, treino no seu jogo)
Autor do painel: By Vipcoringa (créditos no menu)
IMPORTANTE: uso didático no SEU place no Roblox Studio.
--------------------------------------------------------------
Troque o link do Imgur aqui (será mostrado nos Créditos):
]]
local IMGUR_LINK = "https://i.imgur.com/yourimage.png" -- coloque seu link do Imgur aqui

--== Serviços ==--
local Players = game:GetService("Players")
local RunService = game:GetService("RunService")
local UserInputService = game:GetService("UserInputService")
local Lighting = game:GetService("Lighting")
local StarterGui = game:GetService("StarterGui")

local lp = Players.LocalPlayer
local cam = workspace.CurrentCamera

--== Helpers gerais ==--
local function findFirstByNames(container, names)
	for _, n in ipairs(names) do
		local obj = container:FindFirstChild(n, true)
		if obj then return obj end
	end
	return nil
end

local function getHRP(p)
	p = p or lp
	local ch = p.Character
	if ch and ch:FindFirstChild("HumanoidRootPart") then
		return ch.HumanoidRootPart
	end
	return nil
end

local function getHumanoid(p)
	p = p or lp
	local ch = p.Character
	if ch then
		return ch:FindFirstChildOfClass("Humanoid")
	end
	return nil
end

local function safeTP(toPart)
	local hrp = getHRP()
	if hrp and toPart and toPart:IsA("BasePart") then
		hrp.CFrame = toPart.CFrame + Vector3.new(0,3,0)
	end
end

local function toast(msg)
	pcall(function()
		StarterGui:SetCore("SendNotification", {Title="APEXWARE 1.5", Text=msg, Duration=2})
	end)
end

--== GUI raiz ==--
local gui = Instance.new("ScreenGui")
gui.Name = "APEXWARE15_PT"
gui.ResetOnSpawn = false
gui.IgnoreGuiInset = true
gui.Parent = lp:WaitForChild("PlayerGui")

-- Janela principal
local root = Instance.new("Frame")
root.Size = UDim2.new(0, 620, 0, 410)
root.Position = UDim2.new(0, 40, 0.5, -205)
root.BackgroundColor3 = Color3.fromRGB(24,24,28)
root.BorderSizePixel = 0
root.Active = true
root.Parent = gui
local rootCorner = Instance.new("UICorner", root); rootCorner.CornerRadius = UDim.new(0,12)

-- arrastável
do
	local dragging, dragStart, startPos
	root.InputBegan:Connect(function(input)
		if input.UserInputType == Enum.UserInputType.MouseButton1 then
			dragging = true; dragStart = input.Position; startPos = root.Position
			input.Changed:Connect(function()
				if input.UserInputState == Enum.UserInputState.End then dragging=false end
			end)
		end
	end)
	UserInputService.InputChanged:Connect(function(input)
		if dragging and input.UserInputType == Enum.UserInputType.MouseMovement then
			local delta = input.Position - dragStart
			root.Position = UDim2.new(startPos.X.Scale, startPos.X.Offset + delta.X, startPos.Y.Scale, startPos.Y.Offset + delta.Y)
		end
	end)
end

-- Header
local header = Instance.new("TextLabel")
header.Parent = root
header.Size = UDim2.new(1, -20, 0, 36)
header.Position = UDim2.new(0, 10, 0, 8)
header.BackgroundTransparency = 1
header.Text = "APEXWARE 1.5  —  SURVIVE THE KILLER"
header.Font = Enum.Font.GothamBold
header.TextSize = 18
header.TextXAlignment = Enum.TextXAlignment.Left
header.TextColor3 = Color3.fromRGB(235,235,240)

-- Sidebar (seções)
local side = Instance.new("Frame", root)
side.BackgroundColor3 = Color3.fromRGB(30,30,36)
side.BorderSizePixel = 0
side.Position = UDim2.new(0, 10, 0, 56)
side.Size = UDim2.new(0, 180, 1, -66)
local sideCorner = Instance.new("UICorner", side); sideCorner.CornerRadius = UDim.new(0,10)

local sideList = Instance.new("UIListLayout", side)
sideList.Padding = UDim.new(0, 8)
sideList.SortOrder = Enum.SortOrder.LayoutOrder

local sections = {}
local activePage

local content = Instance.new("Frame", root)
content.BackgroundColor3 = Color3.fromRGB(18,18,22)
content.BorderSizePixel = 0
content.Position = UDim2.new(0, 200, 0, 56)
content.Size = UDim2.new(1, -210, 1, -66)
local contentCorner = Instance.new("UICorner", content); contentCorner.CornerRadius = UDim.new(0,10)

local function makePage()
	local p = Instance.new("Frame")
	p.BackgroundTransparency = 1
	p.Size = UDim2.new(1, -20, 1, -20)
	p.Position = UDim2.new(0, 10, 0, 10)
	p.Visible = false
	p.Parent = content
	local list = Instance.new("UIListLayout", p)
	list.Padding = UDim.new(0, 8)
	list.SortOrder = Enum.SortOrder.LayoutOrder
	return p
end

local function switchTo(name)
	for n, pg in pairs(sections) do
		pg.page.Visible = (n == name)
	end
	activePage = name
end

local function sideButton(label, onClick)
	local b = Instance.new("TextButton", side)
	b.Size = UDim2.new(1, -16, 0, 36)
	b.Position = UDim2.new(0, 8, 0, 0)
	b.Text = label
	b.BackgroundColor3 = Color3.fromRGB(44,44,52)
	b.BorderSizePixel = 0
	b.Font = Enum.Font.Gotham
	b.TextSize = 14
	b.TextColor3 = Color3.fromRGB(235,235,240)
	local c = Instance.new("UICorner", b); c.CornerRadius = UDim.new(0,10)
	b.MouseButton1Click:Connect(onClick)
	return b
end

local function makeRow(height)
	local r = Instance.new("Frame")
	r.BackgroundColor3 = Color3.fromRGB(44,44,52)
	r.BorderSizePixel = 0
	r.Size = UDim2.new(1, 0, 0, height or 40)
	local c = Instance.new("UICorner", r); c.CornerRadius = UDim.new(0,10)
	r.Parent = sections[activePage].page
	return r
end

local function rowButton(text, callback)
	local r = makeRow(40)
	local b = Instance.new("TextButton", r)
	b.BackgroundTransparency = 1
	b.Size = UDim2.new(1, -16, 1, 0)
	b.Position = UDim2.new(0, 8, 0, 0)
	b.TextXAlignment = Enum.TextXAlignment.Left
	b.Text = text
	b.Font = Enum.Font.Gotham
	b.TextSize = 14
	b.TextColor3 = Color3.fromRGB(235,235,240)
	b.MouseButton1Click:Connect(function() pcall(callback) end)
end

local function rowToggle(text, default, onChange)
	local r = makeRow(40)
	local label = Instance.new("TextLabel", r)
	label.BackgroundTransparency = 1
	label.Size = UDim2.new(1, -140, 1, 0)
	label.Position = UDim2.new(0, 12, 0, 0)
	label.TextXAlignment = Enum.TextXAlignment.Left
	label.Text = text
	label.Font = Enum.Font.Gotham
	label.TextSize = 14
	label.TextColor3 = Color3.fromRGB(235,235,240)

	local k = Instance.new("TextButton", r)
	k.Size = UDim2.new(0, 110, 0, 28)
	k.Position = UDim2.new(1, -120, 0.5, -14)
	k.Text = default and "Ligado" or "Desligado"
	k.Font = Enum.Font.GothamBold
	k.TextSize = 13
	k.TextColor3 = Color3.fromRGB(255,255,255)
	k.BackgroundColor3 = default and Color3.fromRGB(45,160,95) or Color3.fromRGB(120,120,120)
	k.BorderSizePixel = 0
	local kc = Instance.new("UICorner", k); kc.CornerRadius = UDim.new(0,10)

	local state = default
	if onChange then pcall(onChange, state) end

	k.MouseButton1Click:Connect(function()
		state = not state
		k.Text = state and "Ligado" or "Desligado"
		k.BackgroundColor3 = state and Color3.fromRGB(45,160,95) or Color3.fromRGB(120,120,120)
		pcall(onChange, state)
	end)

	return {
		get = function() return state end,
		set = function(v)
			state = v and true or false
			k.Text = state and "Ligado" or "Desligado"
			k.BackgroundColor3 = state and Color3.fromRGB(45,160,95) or Color3.fromRGB(120,120,120)
			pcall(onChange, state)
		end
	}
end

local function rowSlider(text, min, max, default, onChange)
	local r = makeRow(66)
	local label = Instance.new("TextLabel", r)
	label.BackgroundTransparency = 1
	label.Size = UDim2.new(1, -16, 0, 22)
	label.Position = UDim2.new(0, 8, 0, 6)
	label.TextXAlignment = Enum.TextXAlignment.Left
	label.Text = ("%s: %d"):format(text, default)
	label.Font = Enum.Font.Gotham
	label.TextSize = 14
	label.TextColor3 = Color3.fromRGB(235,235,240)

	local bar = Instance.new("Frame", r)
	bar.BackgroundColor3 = Color3.fromRGB(70,70,80)
	bar.BorderSizePixel = 0
	bar.Position = UDim2.new(0, 8, 0, 36)
	bar.Size = UDim2.new(1, -16, 0, 8)
	local bc = Instance.new("UICorner", bar); bc.CornerRadius = UDim.new(0,6)

	local fill = Instance.new("Frame", bar)
	fill.BackgroundColor3 = Color3.fromRGB(45,160,95)
	fill.BorderSizePixel = 0
	local fc = Instance.new("UICorner", fill); fc.CornerRadius = UDim.new(0,6)

	local value = default
	local dragging = false
	local function setByX(x)
		local rel = math.clamp((x - bar.AbsolutePosition.X)/bar.AbsoluteSize.X, 0, 1)
		value = math.floor(min + rel*(max-min) + 0.5)
		fill.Size = UDim2.new((value-min)/(max-min), 0, 1, 0)
		label.Text = ("%s: %d"):format(text, value)
		if onChange then pcall(onChange, value) end
	end
	fill.Size = UDim2.new((default-min)/(max-min), 0, 1, 0)

	bar.InputBegan:Connect(function(input)
		if input.UserInputType == Enum.UserInputType.MouseButton1 then
			dragging = true; setByX(input.Position.X)
		end
	end)
	UserInputService.InputChanged:Connect(function(input)
		if dragging and input.UserInputType == Enum.UserInputType.MouseMovement then
			setByX(input.Position.X)
		end
	end)
	UserInputService.InputEnded:Connect(function(input)
		if input.UserInputType == Enum.UserInputType.MouseButton1 then dragging=false end
	end)

	if onChange then pcall(onChange, value) end
	return { get=function() return value end, set=function(v) value=v; setByX(bar.AbsolutePosition.X + bar.AbsoluteSize.X*((v-min)/(max-min))) end }
end

--== Registro de páginas ==--
for _, name in ipairs({"LocalPlayer", "Main", "Settings", "Credits"}) do
	sections[name] = {page = makePage()}
	sideButton(name, function() switchTo(name) end)
end
switchTo("Main")

----------------------------------------------------------------
-- PÁGINA: MAIN
----------------------------------------------------------------
activePage = "Main"

-- Botões como no print + extras úteis para treino
rowButton("Auto Teleport - Kill (aproximar do Inimigo)", function()
	local target = findFirstByNames(workspace, {"Assassino","Killer","Inimigo"})
	if target then safeTP(target) else toast("Crie um Part 'Assassino' no Workspace.") end
end)

rowButton("TP PARA SAÍDA", function()
	local exit = findFirstByNames(workspace, {"Saida","Exit"})
	if exit then safeTP(exit) else toast("Crie um Part 'Saida' no Workspace.") end
end)

rowButton("Auto Teleport - Reviver", function()
	local revive = findFirstByNames(workspace, {"Reviver","Revive"})
	if revive then safeTP(revive) else toast("Crie um Part 'Reviver' no Workspace.") end
end)

rowSlider("Field of View", 50, 120, 95, function(v) cam.FieldOfView = v end)

-- ESP / DIST / RAINBOW
local highlights, distConn, rainbowConn = {}, nil, nil
local espToggle = rowToggle("ESP Jogadores", false, function(on)
	for _, p in ipairs(Players:GetPlayers()) do
		if p ~= lp and p.Character then
			if on then
				if not p.Character:FindFirstChildWhichIsA("Highlight") then
					local h = Instance.new("Highlight")
					h.Adornee = p.Character
					h.FillTransparency = 0.55
					h.OutlineTransparency = 0.2
					h.Parent = p.Character
					table.insert(highlights, h)
				end
			else
				for _, obj in ipairs(p.Character:GetChildren()) do
					if obj:IsA("Highlight") then obj:Destroy() end
				end
			end
		end
	end
end)

local rainbowToggle = rowToggle("Rainbow ESP", false, function(on)
	if rainbowConn then rainbowConn:Disconnect(); rainbowConn=nil end
	if on then
		rainbowConn = RunService.Heartbeat:Connect(function()
			local t = tick()
			local r = 0.5 + 0.5*math.sin(t*1.5)
			local g = 0.5 + 0.5*math.sin(t*1.5 + 2)
			local b = 0.5 + 0.5*math.sin(t*1.5 + 4)
			for _, h in ipairs(highlights) do
				if h and h.Parent then
					h.FillColor = Color3.new(r,g,b)
					h.OutlineColor = Color3.new(r,g,b)
				end
			end
		end)
	end
end)

local showDistToggle = rowToggle("Mostrar Distância", false, function(on)
	if distConn then distConn:Disconnect(); distConn=nil end
	for _, p in ipairs(Players:GetPlayers()) do
		if p.Character and p.Character:FindFirstChild("Head") then
			local head = p.Character.Head
			if head:FindFirstChild("DistBill") then head.DistBill:Destroy() end
		end
	end
	if on then
		distConn = RunService.Heartbeat:Connect(function()
			local myHRP = getHRP()
			if not myHRP then return end
			for _, p in ipairs(Players:GetPlayers()) do
				if p ~= lp and p.Character and p.Character:FindFirstChild("HumanoidRootPart") and p.Character:FindFirstChild("Head") then
					local head = p.Character.Head
					local bill = head:FindFirstChild("DistBill")
					if not bill then
						bill = Instance.new("BillboardGui", head)
						bill.Name = "DistBill"; bill.Adornee = head; bill.Size = UDim2.new(0,100,0,22); bill.StudsOffset = Vector3.new(0,2.6,0); bill.AlwaysOnTop = true
						local tl = Instance.new("TextLabel", bill)
						tl.BackgroundTransparency = 0.3; tl.Size = UDim2.new(1,0,1,0); tl.Font = Enum.Font.GothamBold; tl.TextScaled = true; tl.TextColor3 = Color3.new(1,1,1)
					end
					local d = (p.Character.HumanoidRootPart.Position - myHRP.Position).Magnitude
					bill.TextLabel.Text = string.format("%.0fm", d)
				end
			end
		end)
	end
end)

-- Autofarm simples de loot (procura Parts com nomes típicos)
local autoLootConn
local autoLoot = rowToggle("Auto Coletar Loot (teste)", false, function(on)
	if autoLootConn then autoLootConn:Disconnect(); autoLootConn=nil end
	if on then
		autoLootConn = RunService.Heartbeat:Connect(function()
			local names = {"Loot","Moeda","Coin","Gema"}
			local hrp = getHRP()
			if not hrp then return end
			for _, n in ipairs(names) do
				for _, v in ipairs(workspace:GetDescendants()) do
					if v:IsA("BasePart") and v.Name == n then
						if (v.Position - hrp.Position).Magnitude < 200 then
							hrp.CFrame = v.CFrame + Vector3.new(0,3,0)
							task.wait(0.05)
						end
					end
				end
			end
		end)
	end
end)

----------------------------------------------------------------
-- PÁGINA: LOCALPLAYER
----------------------------------------------------------------
activePage = "LocalPlayer"

local wsSaved, jpSaved = 16, 50
rowSlider("Velocidade (WalkSpeed)", 8, 50, 16, function(v)
	local h = getHumanoid()
	if h then h.WalkSpeed = v; wsSaved = v end
end)
rowSlider("Pulo (JumpPower)", 25, 120, 50, function(v)
	local h = getHumanoid()
	if h then h.UseJumpPower = true; h.JumpPower = v; jpSaved = v end
end)

-- Fly básico (tecla F liga/desliga ao ativar este toggle)
local flyConn; local flyBodyGyro; local flyBodyVel; local flyOn=false
rowToggle("Ativar Fly (tecla F)", false, function(enabled)
	if enabled then
		if flyConn then flyConn:Disconnect() end
		flyConn = UserInputService.InputBegan:Connect(function(i,gp)
			if gp then return end
			if i.KeyCode == Enum.KeyCode.F then
				flyOn = not flyOn
				toast(flyOn and "Fly ON" or "Fly OFF")
				local hrp = getHRP()
				if flyOn and hrp then
					flyBodyGyro = Instance.new("BodyGyro", hrp); flyBodyGyro.MaxTorque = Vector3.new(1e5,1e5,1e5); flyBodyGyro.P = 1e5
					flyBodyVel = Instance.new("BodyVelocity", hrp); flyBodyVel.MaxForce = Vector3.new(1e5,1e5,1e5)
				else
					if flyBodyGyro then flyBodyGyro:Destroy() end
					if flyBodyVel then flyBodyVel:Destroy() end
				end
			end
		end)
		RunService.Heartbeat:Connect(function()
			if flyOn then
				local hrp = getHRP(); if not hrp then return end
				flyBodyGyro.CFrame = cam.CFrame
				local dir = Vector3.new()
				if UserInputService:IsKeyDown(Enum.KeyCode.W) then dir += cam.CFrame.LookVector end
				if UserInputService:IsKeyDown(Enum.KeyCode.S) then dir -= cam.CFrame.LookVector end
				if UserInputService:IsKeyDown(Enum.KeyCode.A) then dir -= cam.CFrame.RightVector end
				if UserInputService:IsKeyDown(Enum.KeyCode.D) then dir += cam.CFrame.RightVector end
				flyBodyVel.Velocity = dir * 60
			end
		end)
	else
		if flyConn then flyConn:Disconnect(); flyConn=nil end
		flyOn=false
		if flyBodyGyro then flyBodyGyro:Destroy() end
		if flyBodyVel then flyBodyVel:Destroy() end
	end
end)

-- Noclip
local noclipConn
rowToggle("Noclip", false, function(on)
	if noclipConn then noclipConn:Disconnect(); noclipConn=nil end
	if on then
		noclipConn = RunService.Stepped:Connect(function()
			local ch = lp.Character
			if ch then
				for _, part in ipairs(ch:GetDescendants()) do
					if part:IsA("BasePart") then part.CanCollide = false end
				end
			end
		end)
	end
end)

-- Anti-AFK simples
rowToggle("Anti-AFK", true, function(on)
	if on then
		pcall(function()
			lp.Idled:Connect(function()
				-- mexe o mouse virtualmente
				game:GetService("VirtualUser"):CaptureController()
				game:GetService("VirtualUser"):ClickButton2(Vector2.new())
			end)
		end)
	end
end)

----------------------------------------------------------------
-- PÁGINA: SETTINGS
----------------------------------------------------------------
activePage = "Settings"

-- FullBright + Sem Neblina
local fbConn
rowToggle("FullBright", true, function(on)
	if on then
		Lighting.Brightness = 2
		Lighting.ClockTime = 14
		Lighting.FogEnd = 1e5
		Lighting.Ambient = Color3.fromRGB(128,128,128)
	else
		-- valores padrão comuns (ajuste se necessário ao seu place)
		Lighting.Brightness = 1
		Lighting.ClockTime = 12
		Lighting.FogEnd = 1000
		Lighting.Ambient = Color3.fromRGB(0,0,0)
	end
end)
rowToggle("Sem Neblina (No Fog)", true, function(on)
	if on then Lighting.FogEnd = 1e6 else Lighting.FogEnd = 1000 end
end)

-- Mostrar FPS
local fpsLbl
do
	local r = makeRow(40)
	local txt = Instance.new("TextLabel", r)
	txt.BackgroundTransparency = 1
	txt.Size = UDim2.new(1, -16, 1, 0)
	txt.Position = UDim2.new(0, 8, 0, 0)
	txt.TextXAlignment = Enum.TextXAlignment.Left
	txt.Font = Enum.Font.Gotham
	txt.TextSize = 14
	txt.TextColor3 = Color3.fromRGB(235,235,240)
	txt.Text = "FPS: ..."
	fpsLbl = txt
	local last = tick(); local frames=0
	RunService.Heartbeat:Connect(function()
		frames += 1
		if tick()-last >= 1 then
			fpsLbl.Text = ("FPS: %d"):format(frames)
			last = tick(); frames = 0
		end
	end)
end

-- Resetar configurações básicas
rowButton("Resetar Configurações (WS/Jump/FOV)", function()
	local h = getHumanoid()
	if h then h.WalkSpeed = 16; h.UseJumpPower=true; h.JumpPower = 50 end
	cam.FieldOfView = 70
	toast("Configs básicas resetadas.")
end)

----------------------------------------------------------------
-- PÁGINA: CREDITS
----------------------------------------------------------------
activePage = "Credits"

do
	local r1 = makeRow(110)
	local img = Instance.new("ImageLabel", r1)
	img.BackgroundTransparency = 1
	img.Size = UDim2.new(0, 120, 0, 90)
	img.Position = UDim2.new(0, 12, 0.5, -45)
	img.Image = IMGUR_LINK

	local t = Instance.new("TextLabel", r1)
	t.BackgroundTransparency = 1
	t.Size = UDim2.new(1, -150, 1, -20)
	t.Position = UDim2.new(0, 140, 0, 10)
	t.TextXAlignment = Enum.TextXAlignment.Left
	t.TextYAlignment = Enum.TextYAlignment.Top
	t.Font = Enum.Font.GothamSemibold
	t.TextSize = 16
	t.TextColor3 = Color3.fromRGB(235,235,240)
	t.TextWrapped = true
	t.Text = "By Vipcoringa\n\nObrigado por usar o painel de treino. Este conteúdo é para aprendizado e uso no seu próprio jogo no Roblox Studio."

	local r2 = makeRow(40)
	local btn = Instance.new("TextButton", r2)
	btn.BackgroundTransparency = 1
	btn.Size = UDim2.new(1, -16, 1, 0)
	btn.Position = UDim2.new(0, 8, 0, 0)
	btn.TextXAlignment = Enum.TextXAlignment.Left
	btn.Font = Enum.Font.Gotham
	btn.TextSize = 14
	btn.TextColor3 = Color3.fromRGB(180,200,255)
	btn.Text = "Abrir imagem dos créditos (Imgur)"
	btn.MouseButton1Click:Connect(function()
		-- em jogo, abrir link externo é limitado; no Studio, mostramos um toast informando o link
		toast("Link Imgur copiado no Output.")
		print("Créditos (Imgur): "..IMGUR_LINK)
	end)
end

-- Inicia na aba Main
switchTo("Main")

-- Mensagem inicial
toast("APEXWARE 1.5 (PT) carregado — use no seu place no Studio.")
